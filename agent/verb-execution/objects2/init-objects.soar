# Adds needed structures to the topstate upon initialization
sp {propose*init-agent
   (state <s> -^name
   	      ^superstate nil)
-->
   (<s> ^operator <op> + >)
   (<op> ^name init-agent)
}

sp {apply*init-agent*name
   (state <s> ^operator.name init-agent)
-->
   (<s> ^name object-analyzer)
}


sp {apply*init-agent*augment*topstate
   (state <s> ^operator.name init-agent)
-->
   (<s> ^queries <q>)
}


sp {apply*init-agent*store*smem*word2cat
   (state <s> ^io.input-link <in>
              ^operator.name init-agent
              ^smem.command <cmd>)
-->
   (<cmd> ^store <v11> <v12> <v13> <v14> <v15> <v16> # Color
          		 <v21> <v22> <v23>  # Shape
				 <v31> <v32> <v33>  # Size
				 <v41> <v42> <v43> <v44>) # Name
   # Color
   (<v11> ^type word2cat ^word red ^category color)
   (<v12> ^type word2cat ^word orange ^category color)
   (<v13> ^type word2cat ^word yellow ^category color)
   (<v14> ^type word2cat ^word green ^category color)
   (<v15> ^type word2cat ^word blue ^category color)
   (<v16> ^type word2cat ^word purple ^category color)
   
   # Shape
	(<v21> ^type word2cat ^word square ^category shape)
	(<v22> ^type word2cat ^word round ^category shape)
	(<v23> ^type word2cat ^word triangular ^category shape)
 
 	# Size
	(<v31> ^type word2cat ^word small ^category size)
	(<v32> ^type word2cat ^word medium ^category size)
	(<v33> ^type word2cat ^word large ^category size)
 
 	# Name
	(<v41> ^type word2cat ^word block ^category name)
	#(<v42> ^type word2cat ^word cylinder ^category name)
	(<v43> ^type word2cat ^word ball ^category name)
	(<v44> ^type word2cat ^word object ^category name)
}

# Example way to pre-store labels
sp {apply*init-agent*store*smem*label-map
   (state <s> ^io.input-link <in>
              ^operator.name init-agent
              ^smem.command <cmd>)
-->
   (<cmd> ^store <v1> <v2>)
   (<v1> ^type label-map ^word round ^category shape ^label shape-round)
   (<v2> ^type label-map ^word red ^category color ^label color-red)
}
   