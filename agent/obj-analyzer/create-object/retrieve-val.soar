# retrieve-val
#   If a retrieval hasn't yet been tried for that value, it queries smem

sp {create-object*propose*retrieve-val
   (state <s> ^name create-object
              ^smem.command <cmd>
              ^object.mapping.att-val-pair <av-pair>)
   (<av-pair> ^val <val-node>)
   (<val-node> ^internal <val>
               ^needs-retrieval true)
   (<cmd> -^query.internal <val>)
-->
   (<s> ^operator <o> + =)
   (<o> ^name retrieve-val
        ^val <val>)
}

sp {create-object*apply*retrieve-val
   (state <s> ^name create-object
              ^smem.command <cmd>
              ^operator <o>)
   (<o> ^name retrieve-val
        ^val <internal-val>)
-->
   (<cmd> ^query <q>)
   (<q> ^type value
        ^internal <internal-val>
        ^external <external-val>)
}
